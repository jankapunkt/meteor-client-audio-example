<template name="stream">
	{{#with getSound current}}
		<div class="progress" style="height: 5px;">
			{{#with progress this}}
			<div class="progress-bar" role="progressbar" style="width: {{this}}%;" aria-valuenow="{{this}}" aria-valuemin="0" aria-valuemax="100"></div>
			{{/with}}
		</div>
	{{/with}}
	<table class="table table-hover outer-border">
		<thead>
		<tr>
			<th>Filename</th>
			<th>Size</th>
			<th>Cached?</th>
			<th>Actions</th>
		</tr>
		</thead>
		<tbody>
		{{#each sounds}}
			{{#with getFile this.fileId}}
				{{log this}}
				<tr class="">
					<td class="font-weight-bold">
						{{this.name}}
					</td>
					<td class="text-muted">{{toMB this.size}} MB</td>
					<td>
						{{#if isCached this.link}}
							<i class="fa fa-fw fa-download"></i>
						{{/if}}
					</td>
					<td class="text-right">
						{{#if isPlaying this._id}}
							<button class="btn btn-sm btn-default stop-button" data-target="{{this._id}}">
								<i class="fa fa-fw fa-stop"></i>
							</button>
						{{else}}
							<button class="btn btn-sm btn-default play-button"
									data-target="{{this._id}}"
									data-link="{{this.link}}">
								<i class="fa fa-fw fa-play"></i>
							</button>
						{{/if}}

						<button class="btn btn-sm btn-default delete-button" data-target="{{this._id}}">
							<i class="fa fa-fw fa-trash-o"></i>
						</button>
					</td>
				</tr>
			{{/with}}
		{{/each}}
		</tbody>
	</table>
</template>